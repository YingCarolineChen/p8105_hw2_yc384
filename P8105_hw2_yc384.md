P8105\_hw2\_yc384
================
Ying Chen (UNI: yc384)
9/24/2019

setwd(“/Users/macbook/Documents/Statistics/P8105/HW/P8105 HW2”)

``` r
knitr::opts_chunk$set(echo = TRUE)
library (tidyverse)
```

    ## ── Attaching packages ──────────────────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ─────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library (dplyr)
library(readxl)
rm(list = ls())

options(tibble.print_min = 3)
```

## P8105 DSI Homework 1

### This assignment reinforces ideas in Data Wrangling I

#### 1\. Problem 0

  - Github repo:
    <https://github.com/YingCarolineChen/p8105_hw2_yc384.git>
  - RMarkdown file name: P8105\_hw2\_yc384
  - Create a subdirectory to store local data files and the path is:
    “~/Documents/Statistics/P8105/HW/P8105 HW2”

#### 2\. Problem 1

  - 1-1 Read and tidy Mr. Trash Wheel data
  - Dataset: used updated data
    “Trash-Wheel-Collection-Totals-8-6-19.xlsx”
  - Original dataset contains 7 sheets. For this problem, we only read
    and tidy the Mr. Trash Wheel sheet and sheets with precipitation
    data for 2017 and 2018.

<!-- end list -->

``` r
# read in Mr. Trash Wheel sheet
# skip first rows with notes / figures
# drop last column that containing notes

MrTrashWheel = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "Mr. Trash Wheel", skip = 1, range = "A2:N338", col_names = TRUE) %>% 
  janitor::clean_names()

# omit rows has NA for dumpster
dumpster = 
  drop_na(MrTrashWheel,dumpster) %>% 
  # Round sports balls to nearest integer
  mutate(
  sports_balls_round = round(sports_balls, digits = 0),
  sports_balls_int = as.integer(sports_balls_round)
)

# rename to reasonable variable names
dumpster_rename = rename(dumpster, bags_grocery = grocery_bags, bags_chip  = chip_bags, bottles_plastic = plastic_bottles, bottles_glass = glass_bottles)

# Look at data
head(MrTrashWheel,5)
```

    ## # A tibble: 5 x 14
    ##   dumpster month  year date                weight_tons volume_cubic_ya…
    ##      <dbl> <chr> <dbl> <dttm>                    <dbl>            <dbl>
    ## 1        1 May    2014 2014-05-16 00:00:00        4.31               18
    ## 2        2 May    2014 2014-05-16 00:00:00        2.74               13
    ## 3        3 May    2014 2014-05-16 00:00:00        3.45               15
    ## 4        4 May    2014 2014-05-17 00:00:00        3.1                15
    ## 5        5 May    2014 2014-05-17 00:00:00        4.06               18
    ## # … with 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, sports_balls <dbl>, homes_powered <dbl>

``` r
head(dumpster_rename, 5)
```

    ## # A tibble: 5 x 16
    ##   dumpster month  year date                weight_tons volume_cubic_ya…
    ##      <dbl> <chr> <dbl> <dttm>                    <dbl>            <dbl>
    ## 1        1 May    2014 2014-05-16 00:00:00        4.31               18
    ## 2        2 May    2014 2014-05-16 00:00:00        2.74               13
    ## 3        3 May    2014 2014-05-16 00:00:00        3.45               15
    ## 4        4 May    2014 2014-05-17 00:00:00        3.1                15
    ## 5        5 May    2014 2014-05-17 00:00:00        4.06               18
    ## # … with 10 more variables: bottles_plastic <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, bottles_glass <dbl>, bags_grocery <dbl>,
    ## #   bags_chip <dbl>, sports_balls <dbl>, homes_powered <dbl>,
    ## #   sports_balls_round <dbl>, sports_balls_int <int>

``` r
skimr::skim(MrTrashWheel)
```

    ## Skim summary statistics
    ##  n obs: 336 
    ##  n variables: 14 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##  variable missing complete   n min max empty n_unique
    ##     month       0      336 336   3  15     0       26
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##            variable missing complete   n     mean        sd      p0
    ##           chip_bags       0      336 336  3263      4369.25  330   
    ##     cigarette_butts       0      336 336 61280.36 113816.09 1000   
    ##            dumpster      50      286 336   143.5      82.71    1   
    ##       glass_bottles       0      336 336    47.49     69.89    2   
    ##        grocery_bags       0      336 336  2409.71   3521.56   50   
    ##       homes_powered       0      336 336    71.3     123.73    0   
    ##     plastic_bottles       0      336 336  3345.57   4326.34  210   
    ##         polystyrene       0      336 336  3940.07   5044.03  320   
    ##        sports_balls       0      336 336    21.5      35.7     0   
    ##  volume_cubic_yards       0      336 336    26.47     36.89    7   
    ##         weight_tons       0      336 336     5.57      8.22    0.96
    ##                year      50      286 336  2016.09      1.4  2014   
    ##       p25      p50      p75     p100     hist
    ##   1168     2140     3125    39240    ▇▁▁▁▁▁▁▁
    ##  14000    31000    65000    1e+06    ▇▁▁▁▁▁▁▁
    ##     72.25   143.5    214.75   286    ▇▇▇▇▇▇▇▇
    ##     15       31.5     48      639    ▇▁▁▁▁▁▁▁
    ##    743     1515     2575    32640    ▇▁▁▁▁▁▁▁
    ##     32.38    52.83    64.71  1055.67 ▇▁▁▁▁▁▁▁
    ##   1205     2242     3205    35290    ▇▁▁▁▁▁▁▁
    ##   1450     2565     3740    45740    ▇▁▁▁▁▁▁▁
    ##      6       11.5     24      420    ▇▁▁▁▁▁▁▁
    ##     15       15       18      336    ▇▁▁▁▁▁▁▁
    ##      2.87     3.45     4.16    76.89 ▇▁▁▁▁▁▁▁
    ##   2015     2016     2017     2018    ▅▇▁▆▁▆▁▇
    ## 
    ## ── Variable type:POSIXct ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n        min        max     median n_unique
    ##      date      50      286 336 2014-05-16 2018-08-09 2016-07-18      187

``` r
skimr::skim(dumpster_rename)
```

    ## Skim summary statistics
    ##  n obs: 286 
    ##  n variables: 16 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##  variable missing complete   n min max empty n_unique
    ##     month       0      286 286   3   9     0       12
    ## 
    ## ── Variable type:integer ────────────────────────────────────────────────────────────────
    ##          variable missing complete   n  mean    sd p0 p25 p50 p75 p100
    ##  sports_balls_int       0      286 286 12.63 10.31  0   5   8  18   56
    ##      hist
    ##  ▇▃▂▂▁▁▁▁
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##            variable missing complete   n     mean       sd      p0
    ##           bags_chip       0      286 286  1919.61   969.32  330   
    ##        bags_grocery       0      286 286  1417.09   916.82   50   
    ##       bottles_glass       0      286 286    27.91    19.05    2   
    ##     bottles_plastic       0      286 286  1968.29  1052.2   210   
    ##     cigarette_butts       0      286 286 36016.08 35584.42 1000   
    ##            dumpster       0      286 286   143.5     82.71    1   
    ##       homes_powered       0      286 286    41.98    25.57    0   
    ##         polystyrene       0      286 286  2316.18  1210.26  320   
    ##        sports_balls       0      286 286    12.64    10.31    0   
    ##  sports_balls_round       0      286 286    12.63    10.31    0   
    ##  volume_cubic_yards       0      286 286    15.57     1.78    7   
    ##         weight_tons       0      286 286     3.28     0.78    0.96
    ##                year       0      286 286  2016.09     1.4  2014   
    ##       p25      p50      p75      p100     hist
    ##   1040     1840     2655      5085    ▇▇▆▇▆▃▁▁
    ##    650     1240     2130      3750    ▇▇▅▅▅▃▂▁
    ##     12       26       41.75    110    ▇▇▆▃▂▁▁▁
    ##    980     1925     2667.5    5960    ▇▇▇▇▃▂▁▁
    ##  12000    25500    46000    310000    ▇▂▁▁▁▁▁▁
    ##     72.25   143.5    214.75    286    ▇▇▇▇▇▇▇▇
    ##     30.54    50.92    60.25     93.67 ▇▁▂▅▇▆▂▁
    ##   1235     2250     3150      6540    ▇▇▇▇▅▂▁▁
    ##      5.2      8       18        56    ▇▅▂▂▁▁▁▁
    ##      5        8       18        56    ▇▃▂▂▁▁▁▁
    ##     15       15       17        20    ▁▁▁▁▇▁▃▁
    ##      2.73     3.33     3.83      5.62 ▁▂▅▇▇▅▁▁
    ##   2015     2016     2017      2018    ▅▇▁▆▁▆▁▇
    ## 
    ## ── Variable type:POSIXct ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n        min        max     median n_unique
    ##      date       0      286 286 2014-05-16 2018-08-09 2016-07-18      187

#### 2\. Problem 1

  - 1-2 Read and tidy precipitation data

  - ``` 
    join datasets and some data manipulations
    ```

<!-- end list -->

``` r
# read in precipitation data for 2017 and 2018
# Omit rows without precipitation data and add a variable year

precipitation_2017 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2017 Precipitation", skip = 1, range = "A2:B14", col_names = TRUE) %>%
  janitor::clean_names() %>% 
  mutate(
    year = 2017) %>% 
  drop_na (total)

precipitation_2018 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2018 Precipitation", skip = 1, range = "A2:B14", col_names = TRUE) %>%
  janitor::clean_names() %>% 
  mutate(
    year = 2018) %>% 
  drop_na (total)

# Combine precipitation datasets
precipitation_join = 
  full_join(precipitation_2017, precipitation_2018, by = NULL) %>% 
  # convert month to a character variable
  mutate(
    month = month.name[month]
  )
```

    ## Joining, by = c("month", "total", "year")

``` r
head(precipitation_join,5)
```

    ## # A tibble: 5 x 3
    ##   month    total  year
    ##   <chr>    <dbl> <dbl>
    ## 1 January   2.34  2017
    ## 2 February  1.46  2017
    ## 3 March     3.57  2017
    ## 4 April     3.99  2017
    ## 5 May       5.64  2017

``` r
skimr::skim(precipitation_2017)
```

    ## Skim summary statistics
    ##  n obs: 12 
    ##  n variables: 3 
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##  variable missing complete  n    mean   sd   p0     p25     p50     p75
    ##     month       0       12 12    6.5  3.61    1    3.75    6.5     9.25
    ##     total       0       12 12    2.74 2.22    0    1.28    2.15    4.1 
    ##      year       0       12 12 2017    0    2017 2017    2017    2017   
    ##     p100     hist
    ##    12    ▇▃▇▃▃▇▃▇
    ##     7.09 ▅▇▅▁▅▂▂▂
    ##  2017    ▁▁▁▇▁▁▁▁

``` r
skimr::skim(precipitation_2018)
```

    ## Skim summary statistics
    ##  n obs: 7 
    ##  n variables: 3 
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##  variable missing complete n    mean   sd     p0     p25     p50     p75
    ##     month       0        7 7    4    2.16    1      2.5     4       5.5 
    ##     total       0        7 7    3.36 3.08    0.2    1.57    2.39    4.25
    ##      year       0        7 7 2018    0    2018   2018    2018    2018   
    ##     p100     hist
    ##     7    ▇▇▇▇▁▇▇▇
    ##     9.27 ▇▇▃▁▃▁▁▃
    ##  2018    ▁▁▁▇▁▁▁▁

``` r
skimr::skim(precipitation_join)
```

    ## Skim summary statistics
    ##  n obs: 19 
    ##  n variables: 3 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##  variable missing complete  n min max empty n_unique
    ##     month       0       19 19   3   9     0       12
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##  variable missing complete  n    mean  sd   p0     p25     p50     p75
    ##     total       0       19 19    2.97 2.5    0    1.18    2.34    4.21
    ##      year       0       19 19 2017.37 0.5 2017 2017    2017    2018   
    ##     p100     hist
    ##     9.27 ▇▆▅▅▃▁▂▂
    ##  2018    ▇▁▁▁▁▁▁▅

#### 2\. Problem 1

  - 1-3 Datasets description using inline R code

<!-- end list -->

``` r
# sub dataset of year 2017
dump2017 = filter(dumpster, year == 2017)
```

Dataset Mr. Trash Wheel contains 336 obersvations and 14 variables. The
key variable for this dataset is called “dumpster”. Variable “dumpster”
has 50 rows with “NA” and will be excluded for future analyses. The
median number of sports balls in a dumpster in 2017 is: 8.

Dataset precipitation\_2017 contains 12 obersvations and 3 variables.
The key variables for this dataset is year and month. Dataset
precipitation\_2018 contains 7 obersvations and 3 variables. The key
variables for this dataset are year and month. Dataset
precipitation\_join is the combination of datasets precipitation\_2017
and precipitation\_2018. The total precipitation is 2018 is 23.5in.

#### 3\. Problem 2

  - Read pols-month.csv, unemployment.csv, and snp.csv and merge them
    using year and month as keys
  - 2-1 This code cunk will read and tidy pols-month.csv.
  - break up the variable mon into integer variables year, month, and
    day;
  - replace month number with month name;
  - create a president variable taking values gop and dem, remove
    prez\_dem, prez\_gop & the day variable.

#### 2\_1 Read and Tidy dataset: Pols

``` r
# read in pols-month.csv
pols = 
  read_csv("./data/pols-month.csv", col_names = TRUE)%>% 
  janitor::clean_names() 
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
# tidy dataset pols
pols_tidy = 
  mutate (pols,
    # change date format
    date = as.Date(mon, format='%m/%d/%Y')
  ) %>% 
  # break date to three vars
  separate(., "date", c("year", "month", "day")) %>% 
  mutate(
  month = as.numeric(month),
  #replace month number with month name
  month = month.name[c(month)],
  year = as.integer(year)
  ) %>% 
  # create a president var taking values from prez_gop and prez_gop
  mutate(., president = ifelse (prez_gop == 1, "gop", "dem")) %>%  
  # reorder varaibles and remove three variables
  select(year, month, everything(), -prez_dem, -prez_gop, -day)

head(pols_tidy, 5)
```

    ## # A tibble: 5 x 10
    ##    year month mon        gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##   <int> <chr> <date>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ## 1  1947 Janu… 1947-01-15      23      51     253      23      45     198
    ## 2  1947 Febr… 1947-02-15      23      51     253      23      45     198
    ## 3  1947 March 1947-03-15      23      51     253      23      45     198
    ## 4  1947 April 1947-04-15      23      51     253      23      45     198
    ## 5  1947 May   1947-05-15      23      51     253      23      45     198
    ## # … with 1 more variable: president <chr>

``` r
skimr::skim(pols_tidy)
```

    ## Skim summary statistics
    ##  n obs: 822 
    ##  n variables: 10 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##   variable missing complete   n min max empty n_unique
    ##      month       0      822 822   3   9     0       12
    ##  president       0      822 822   3   3     0        2
    ## 
    ## ── Variable type:Date ───────────────────────────────────────────────────────────────────
    ##  variable missing complete   n        min        max     median n_unique
    ##       mon       0      822 822 1947-01-15 2015-06-15 1981-03-30      822
    ## 
    ## ── Variable type:integer ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n    mean    sd   p0  p25  p50  p75 p100
    ##      year       0      822 822 1980.75 19.79 1947 1964 1981 1998 2015
    ##      hist
    ##  ▇▇▇▇▇▇▇▇
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n   mean    sd  p0 p25 p50 p75 p100     hist
    ##   gov_dem       0      822 822  27.2   5.94  17  22  28  32   41 ▆▆▃▇▃▆▂▁
    ##   gov_gop       0      822 822  22.48  5.68  12  18  22  28   34 ▂▇▇▆▆▃▇▂
    ##   rep_dem       0      822 822 244.97 31.37 188 211 250 268  301 ▆▅▁▅▇▇▂▅
    ##   rep_gop       0      822 822 194.92 29.24 141 176 195 222  253 ▃▃▇▃▅▃▅▂
    ##   sen_dem       0      822 822  54.41  7.37  44  48  53  58   71 ▇▆▆▆▃▂▃▃
    ##   sen_gop       0      822 822  46.1   6.38  32  42  46  51   56 ▃▂▃▅▇▃▃▆

#### 2\_2 2\_1 Read and Tidy dataset: snp

``` r
# read and tidy in snp.csv
snp_tidy = 
  read_csv("./data/snp.csv", col_names = TRUE) %>% 
  mutate (
    # change date format
    Date1 = as.Date(date, format='%m/%d/%Y')
  ) %>% 
  janitor::clean_names() %>% 
  # break date to three vars
  separate(., "date1", c("year", "month", "day")) %>% 
  mutate (
   month = as.numeric(month),
   #replace month number with month name
   month = month.name[c(month)],
   year = as.integer(year)
  ) %>% 
  # reorder varaibles and remove three variables
  select(year, month, everything(), -day)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
# arrange snp_tidy by year and month
snp_tidy = arrange(snp_tidy, year, month)

head(snp_tidy, 5)
```

    ## # A tibble: 5 x 4
    ##    year month    date      close
    ##   <int> <chr>    <chr>     <dbl>
    ## 1  1950 April    4/3/1950   18.0
    ## 2  1950 August   8/1/1950   18.4
    ## 3  1950 December 12/1/1950  20.4
    ## 4  1950 February 2/1/1950   17.2
    ## 5  1950 January  1/3/1950   17.0

``` r
skimr::skim(snp_tidy)
```

    ## Skim summary statistics
    ##  n obs: 787 
    ##  n variables: 4 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##  variable missing complete   n min max empty n_unique
    ##      date       0      787 787   8   9     0      787
    ##     month       0      787 787   3   9     0       12
    ## 
    ## ── Variable type:integer ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n    mean    sd   p0  p25  p50  p75 p100
    ##      year       0      787 787 1982.29 18.95 1950 1966 1982 1999 2015
    ##      hist
    ##  ▇▇▇▇▇▇▇▇
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n   mean     sd    p0   p25    p50   p75
    ##     close       0      787 787 474.89 545.96 17.05 83.74 138.53 941.8
    ##     p100     hist
    ##  2107.39 ▇▂▁▁▂▁▁▁

#### 2\_3 2\_1 Read and Tidy dataset: unemployment

``` r
# read in unemployment.csv
unemployment = 
  read_csv("./data/unemployment.csv", col_names = TRUE) %>% 
  janitor::clean_names()
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
# tidy dataset employment 
unemployment_tidy = 
  pivot_longer(
    unemployment,
    jan:dec,
    names_to = "month",
    values_to = "unemploy_rate"
  ) %>% 
  mutate(
   year = as.integer(year) 
  ) %>% 
  select(year, month, everything())

head(unemployment_tidy, 5)
```

    ## # A tibble: 5 x 3
    ##    year month unemploy_rate
    ##   <int> <chr>         <dbl>
    ## 1  1948 jan             3.4
    ## 2  1948 feb             3.8
    ## 3  1948 mar             4  
    ## 4  1948 apr             3.9
    ## 5  1948 may             3.5

``` r
skimr::skim(unemployment_tidy)
```

    ## Skim summary statistics
    ##  n obs: 816 
    ##  n variables: 3 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##  variable missing complete   n min max empty n_unique
    ##     month       0      816 816   3   3     0       12
    ## 
    ## ── Variable type:integer ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n   mean    sd   p0     p25    p50     p75
    ##      year       0      816 816 1981.5 19.64 1948 1964.75 1981.5 1998.25
    ##  p100     hist
    ##  2015 ▇▇▇▇▇▇▇▇
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##       variable missing complete   n mean   sd  p0 p25 p50 p75 p100
    ##  unemploy_rate       6      810 816 5.83 1.65 2.5 4.7 5.6 6.9 10.8
    ##      hist
    ##  ▂▅▇▆▅▂▁▁

#### 2\_4 Join datasets snp, pols and unemployment

``` r
# joining snp_tidy to pols_tidy by year and month
pols_snp = 
  left_join(pols_tidy, snp_tidy, by = c('year' = 'year', 'month' = 'month')) %>% 
  select(year, month, close, president,everything())

# check joined dataset
head(pols_snp,5)
```

    ## # A tibble: 5 x 12
    ##    year month close president mon        gov_gop sen_gop rep_gop gov_dem
    ##   <int> <chr> <dbl> <chr>     <date>       <dbl>   <dbl>   <dbl>   <dbl>
    ## 1  1947 Janu…    NA dem       1947-01-15      23      51     253      23
    ## 2  1947 Febr…    NA dem       1947-02-15      23      51     253      23
    ## 3  1947 March    NA dem       1947-03-15      23      51     253      23
    ## 4  1947 April    NA dem       1947-04-15      23      51     253      23
    ## 5  1947 May      NA dem       1947-05-15      23      51     253      23
    ## # … with 3 more variables: sen_dem <dbl>, rep_dem <dbl>, date <chr>

``` r
tail(pols_snp,5)
```

    ## # A tibble: 5 x 12
    ##    year month close president mon        gov_gop sen_gop rep_gop gov_dem
    ##   <int> <chr> <dbl> <chr>     <date>       <dbl>   <dbl>   <dbl>   <dbl>
    ## 1  2015 Febr… 2104. dem       2015-02-15      31      54     245      18
    ## 2  2015 March 2068. dem       2015-03-15      31      54     245      18
    ## 3  2015 April 2086. dem       2015-04-15      31      54     244      18
    ## 4  2015 May   2107. dem       2015-05-15      31      54     245      18
    ## 5  2015 June  2063. dem       2015-06-15      31      54     246      18
    ## # … with 3 more variables: sen_dem <dbl>, rep_dem <dbl>, date <chr>

``` r
# joining unemployment_tidy to pols_snp by year and month
pols_snp_unemploy = 
  left_join(pols_snp, unemployment_tidy, by = c('year' = 'year', 'month' = 'month')) %>%
  select(year, month, unemploy_rate, close, president, everything())

# check joined dataset
head(pols_snp_unemploy,5)
```

    ## # A tibble: 5 x 13
    ##    year month unemploy_rate close president mon        gov_gop sen_gop
    ##   <int> <chr>         <dbl> <dbl> <chr>     <date>       <dbl>   <dbl>
    ## 1  1947 Janu…            NA    NA dem       1947-01-15      23      51
    ## 2  1947 Febr…            NA    NA dem       1947-02-15      23      51
    ## 3  1947 March            NA    NA dem       1947-03-15      23      51
    ## 4  1947 April            NA    NA dem       1947-04-15      23      51
    ## 5  1947 May              NA    NA dem       1947-05-15      23      51
    ## # … with 5 more variables: rep_gop <dbl>, gov_dem <dbl>, sen_dem <dbl>,
    ## #   rep_dem <dbl>, date <chr>

``` r
tail(pols_snp_unemploy,5)
```

    ## # A tibble: 5 x 13
    ##    year month unemploy_rate close president mon        gov_gop sen_gop
    ##   <int> <chr>         <dbl> <dbl> <chr>     <date>       <dbl>   <dbl>
    ## 1  2015 Febr…            NA 2104. dem       2015-02-15      31      54
    ## 2  2015 March            NA 2068. dem       2015-03-15      31      54
    ## 3  2015 April            NA 2086. dem       2015-04-15      31      54
    ## 4  2015 May              NA 2107. dem       2015-05-15      31      54
    ## 5  2015 June             NA 2063. dem       2015-06-15      31      54
    ## # … with 5 more variables: rep_gop <dbl>, gov_dem <dbl>, sen_dem <dbl>,
    ## #   rep_dem <dbl>, date <chr>

``` r
skimr::skim(unemployment_tidy)
```

    ## Skim summary statistics
    ##  n obs: 816 
    ##  n variables: 3 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##  variable missing complete   n min max empty n_unique
    ##     month       0      816 816   3   3     0       12
    ## 
    ## ── Variable type:integer ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n   mean    sd   p0     p25    p50     p75
    ##      year       0      816 816 1981.5 19.64 1948 1964.75 1981.5 1998.25
    ##  p100     hist
    ##  2015 ▇▇▇▇▇▇▇▇
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##       variable missing complete   n mean   sd  p0 p25 p50 p75 p100
    ##  unemploy_rate       6      810 816 5.83 1.65 2.5 4.7 5.6 6.9 10.8
    ##      hist
    ##  ▂▅▇▆▅▂▁▁

``` r
skimr::skim(pols_snp_unemploy)
```

    ## Skim summary statistics
    ##  n obs: 822 
    ##  n variables: 13 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##   variable missing complete   n min max empty n_unique
    ##       date      36      786 822   8   9     0      786
    ##      month       0      822 822   3   9     0       12
    ##  president       0      822 822   3   3     0        2
    ## 
    ## ── Variable type:Date ───────────────────────────────────────────────────────────────────
    ##  variable missing complete   n        min        max     median n_unique
    ##       mon       0      822 822 1947-01-15 2015-06-15 1981-03-30      822
    ## 
    ## ── Variable type:integer ────────────────────────────────────────────────────────────────
    ##  variable missing complete   n    mean    sd   p0  p25  p50  p75 p100
    ##      year       0      822 822 1980.75 19.79 1947 1964 1981 1998 2015
    ##      hist
    ##  ▇▇▇▇▇▇▇▇
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##       variable missing complete   n   mean     sd     p0    p25    p50
    ##          close      36      786 822 472.85 543.29  17.05  83.67 137.26
    ##        gov_dem       0      822 822  27.2    5.94  17     22     28   
    ##        gov_gop       0      822 822  22.48   5.68  12     18     22   
    ##        rep_dem       0      822 822 244.97  31.37 188    211    250   
    ##        rep_gop       0      822 822 194.92  29.24 141    176    195   
    ##        sen_dem       0      822 822  54.41   7.37  44     48     53   
    ##        sen_gop       0      822 822  46.1    6.38  32     42     46   
    ##  unemploy_rate     822        0 822 NaN     NA     NA     NA     NA   
    ##     p75    p100     hist
    ##  932.06 2107.39 ▇▂▁▁▂▁▁▁
    ##   32      41    ▆▆▃▇▃▆▂▁
    ##   28      34    ▂▇▇▆▆▃▇▂
    ##  268     301    ▆▅▁▅▇▇▂▅
    ##  222     253    ▃▃▇▃▅▃▅▂
    ##   58      71    ▇▆▆▆▃▂▃▃
    ##   51      56    ▃▂▃▅▇▃▃▆
    ##   NA      NA

We used datasets from the FiveThirtyEight data for this problem. Each of
these datasets ‘pols-month.csv’, ‘unemployment.csv’ and ‘snp.csv’ files
was imported successfully and was cleaned.

Pols\_tidy contains 822 obersvations and 10 variables. snp\_tidy
contains 787 obersvations and 4 variables. unemployment\_tidy contains
816 obersvations and 3 variables.

The three datasets were joined together by using the key variables
“year’ and”month“. The combined dataset is
called:”pols\_snp\_unemploy", which as 822 obersvations and 13
variables. The range of years is from `min(pols_snp_unemploy$year)` to
2015. The names of the key variables are year and month.

#### 3\. Problem 3

  - This problem uses data from NYC Open data on the popularity of baby
    names.

First, we loadn and tidy the data.

``` r
baby_names = 
  read_csv("./data/Popular_Baby_Names.csv", skip = 1, col_names = TRUE) %>% 
  janitor::clean_names()
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

``` r
head(baby_names,5)
```

    ## # A tibble: 5 x 6
    ##   year_of_birth gender ethnicity               childs_first_na… count  rank
    ##           <dbl> <chr>  <chr>                   <chr>            <dbl> <dbl>
    ## 1          2016 FEMALE ASIAN AND PACIFIC ISLA… Olivia             172     1
    ## 2          2016 FEMALE ASIAN AND PACIFIC ISLA… Chloe              112     2
    ## 3          2016 FEMALE ASIAN AND PACIFIC ISLA… Sophia             104     3
    ## 4          2016 FEMALE ASIAN AND PACIFIC ISLA… Emily               99     4
    ## 5          2016 FEMALE ASIAN AND PACIFIC ISLA… Emma                99     4

``` r
tail(baby_names,5)
```

    ## # A tibble: 5 x 6
    ##   year_of_birth gender ethnicity          childs_first_name count  rank
    ##           <dbl> <chr>  <chr>              <chr>             <dbl> <dbl>
    ## 1          2011 MALE   WHITE NON HISPANIC STEPHEN              10    97
    ## 2          2011 MALE   WHITE NON HISPANIC STEPHEN              10    97
    ## 3          2011 MALE   WHITE NON HISPANIC DEREK                10    97
    ## 4          2011 MALE   WHITE NON HISPANIC BENNETT              10    97
    ## 5          2011 MALE   WHITE NON HISPANIC ELLIS                10    97

``` r
skimr::skim(baby_names)
```

    ## Skim summary statistics
    ##  n obs: 19418 
    ##  n variables: 6 
    ## 
    ## ── Variable type:character ──────────────────────────────────────────────────────────────
    ##           variable missing complete     n min max empty n_unique
    ##  childs_first_name       0    19418 19418   2  11     0     3021
    ##          ethnicity       0    19418 19418   8  26     0        7
    ##             gender       0    19418 19418   4   6     0        2
    ## 
    ## ── Variable type:numeric ────────────────────────────────────────────────────────────────
    ##       variable missing complete     n    mean    sd   p0  p25  p50  p75
    ##          count       0    19418 19418   33.52 38.24   10   13   20   36
    ##           rank       0    19418 19418   57.5  25.36    1   38   59   78
    ##  year_of_birth       0    19418 19418 2013.12  1.6  2011 2012 2013 2014
    ##  p100     hist
    ##   426 ▇▁▁▁▁▁▁▁
    ##   102 ▂▃▆▇▇▇▇▅
    ##  2016 ▇▇▁▇▇▁▅▅

``` r
summary(baby_names)
```

    ##  year_of_birth     gender           ethnicity         childs_first_name 
    ##  Min.   :2011   Length:19418       Length:19418       Length:19418      
    ##  1st Qu.:2012   Class :character   Class :character   Class :character  
    ##  Median :2013   Mode  :character   Mode  :character   Mode  :character  
    ##  Mean   :2013                                                           
    ##  3rd Qu.:2014                                                           
    ##  Max.   :2016                                                           
    ##      count             rank      
    ##  Min.   : 10.00   Min.   :  1.0  
    ##  1st Qu.: 13.00   1st Qu.: 38.0  
    ##  Median : 20.00   Median : 59.0  
    ##  Mean   : 33.52   Mean   : 57.5  
    ##  3rd Qu.: 36.00   3rd Qu.: 78.0  
    ##  Max.   :426.00   Max.   :102.0

From the above steps, we can see that the values for variable “Child’s
First Name” are not consistant. Some names were capitalized only with
the first letter. Some names are all entered as upper case. In order to
be consistent, we need to change the names to upper case.

``` r
 #rename = (baby_names, first_name ="Child's First Name")


#baby_names_tidy = 
    #rename(first_name =
  #mutate(baby_names,
  #)
```

mutate ( \# change date format Date1 = as.Date(date, format=‘%m/%d/%Y’)
) %\>%

\# break date to three vars separate(., “date1”, c(“year”, “month”,
“day”)) %\>% mutate ( month = as.numeric(month), \#replace month
number with month name month = month.name\[c(month)\], year =
as.integer(year) ) %\>% \# reorder varaibles and remove three variables
select(year, month, everything(), -day) \`\`\`
